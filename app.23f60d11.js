(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,function(e,n,t){e.exports=t(7)},,function(e,n,t){},function(e,n,t){"use strict";t.r(n);var a=t(3),o=t(0),i=[37.76496739271615,-122.39985495803376],s=window.innerHeight>=window.innerWidth,r={Consulting:"#ff7f0e",Deconstruction:"#2ca02c","Government / Public Agency":"#aec7e8",Reuse:"#9467bd","Waste Management & Recycling":"#bcbd22"};function l(e){var n=function(e){for(var n={type:"FeatureCollection",features:[]},t=0;t<e.length;t++){var a=e[t];a.LON=a.LON.replace(",","."),a.LAT=a.LAT.replace(",",".");var o=a.LON,i=a.LAT;o.match(/[a-z]/i)&&i.match(/[a-z]/i)&&(a.LON=c(a.LON),a.LAT=c(a.LAT));try{if(0==isNaN(parseFloat(o))&&0==isNaN(parseFloat(i))){var s=d(a);n.features.push(s)}}catch(e){console.log("error parsing row",t,a,e)}}return n}(e);console.log(e),console.log(n),console.log(e.length,"rows received"),console.log(n.features.length,"rows parsed"),function(e){var n=o.map("map",{center:i,zoom:8,scrollWheelZoom:!1,zoomControl:!1});o.control.zoom({position:"bottomleft"}).addTo(n),o.tileLayer("https://api.mapbox.com/styles/v1/bernardosp/ck3r9ne5k21bj1dpdgl67vzyu/tiles/256/{z}/{x}/{y}@2x?access_token=pk.eyJ1IjoiYmVybmFyZG9zcCIsImEiOiJjamkyMmhqdjAwZ284M2txcHpqYjUwam91In0.RiploEl5Mm6bjXhPZbN6XQ",{maxZoom:18,attribution:'Map data &copy <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',id:"mapbox.light"}).addTo(n);o.geoJSON(e,{pointToLayer:function(e,n){return o.circleMarker(n,{radius:9,fillColor:r[e.properties["GENERAL ROLE"]],color:"#fff",weight:1.5,opacity:1,fillOpacity:.9})},onEachFeature:function(e,n){var t=e.properties;n.bindPopup('\n      <div class="popup">\n        <h2>'+t.ENTITY+"</h2>\n        "+(t.LOCATION?"<h4>"+t.LOCATION+"</h4>":"")+'\n        <hr/>\n        <table class="popup-table">\n          <tbody>\n            <tr><td><strong>Role(s)</strong></td><td>'+t["ROLE(S)"]+"</td></tr>\n            <tr><td><strong>Address</strong></td><td>"+t["FULL ADDRESS"]+"</td></tr>\n            <tr><td><strong>Contact</strong></td><td>"+t.CONTACT+'</td></tr>\n            <tr><td><strong>Email</strong></td><td><a href="mailto:'+t.EMAIL+'">'+t.EMAIL+'</a></td></tr>\n            <tr><td><strong>Phone</strong></td><td><a href="tel:'+t.PHONE+'">'+t.PHONE+'</a></td></tr>\n            <tr><td><strong>Website</strong></td><td><a href="'+t.WEBSITE+'" target="_blank">'+t.WEBSITE+'</a></td></tr>\n          </tbody>\n        </table>\n        <p class="popup-p"><strong>Collaboration Opportunities: </strong>'+t["COLLABORATION OPPORTUNITIES"]+"</p>\n      </div>\n      ",{maxWidth:s?.75*window.innerWidth:450}),n.bindTooltip('\n      <div class="tooltip">\n        <strong style="font-size: 1.25em;">'+t.ENTITY+"</strong>\n        "+(t.LOCATION?"<br /><span>"+t.LOCATION+"</span>":"")+"\n      </div>\n      ",{maxWidth:s?.75*window.innerWidth:450})}}).addTo(n)}(n),setTimeout((function(){document.getElementById("spinner").style.display="none"}),350)}function d(e){var n={type:"Feature",properties:{},geometry:{type:"Point",coordinates:[]}};for(var t in e)e.hasOwnProperty(t)&&(n.properties[t.trim()]=e[t].trim());return n.geometry.coordinates.push(parseFloat(e.LON)),n.geometry.coordinates.push(parseFloat(e.LAT)),n}function c(e){var n=e.split(/[^\d\w\.]+/);return function(e,n,t,a){var o=parseInt(e)+parseInt(n)/60+parseInt(t)/3600;"S"!=a&&"W"!=a||(o*=-1);return o}(n[0],n[1],n[2],n[3])}var p=t(1);t(2),t(5);function m(){a.parse("https://docs.google.com/spreadsheets/d/e/2PACX-1vSZ_aRgmKOVqj1Ch4zy8zzjkQREuYo0xXzPlJUKv4-7ULfWNNQdJbOFJgVFayS4zbT7vvkIaJ5JZaBa/pub?output=csv",{download:!0,header:!0,complete:function(e){var n=e.data.filter((function(e){if("STATUS"in e)return"published"==e.STATUS.trim().toLowerCase()}));l(n),function(e,n){for(var t=0;t<e.length;t++){var a=e[t];a.ENTITY=a.ENTITY+" - "+a.LOCATION}p(n).DataTable({data:e,responsive:!0,paging:!0,columns:[{data:"ENTITY",title:"ENTITY:",className:"details-col",render:function(e,n,t,a){return'<span class="details-link">'+e+"</span>"}},{data:"ROLE(S)",title:"ROLE(S):"},{data:"FULL ADDRESS",title:"ADDRESS:",className:"none"},{data:"CONTACT",title:"CONTACT:",className:"none"},{data:"EMAIL",title:"EMAIL:",className:"none",render:function(e,n,t,a){return'<a href="mailto:'+e+'">'+e+"</a>"}},{data:"PHONE",title:"PHONE:",className:"none",render:function(e,n,t,a){return'<a href="tel:'+e+'">'+e+"</a>"}},{data:"WEBSITE",title:"WEBSITE:",className:"none",render:function(e,n,t,a){return'<a href="'+e+'" target="_blank">'+e+"</a>"}},{data:"COLLABORATION OPPORTUNITIES",title:"COLLABORATION OPPORTUNITIES:",className:"none"}]})}(n,"#table")}})}t(6);document.querySelector("#app").innerHTML='\n<div id="spinner">\n  <div class="spinner-grow text-secondary" role="status">\n    <span class="sr-only">Loading...</span>\n  </div>\n</div>\n<div id="map"></div>\n<a href="https://www.buildingproductecosystems.org/" target="_blank">\n  <img src="images/bpe-logo.png" alt="Building Product Ecosystems" id="mapLogo"></img>\n</a>\n<div id="mapLegend"></div>\n<div class="table-wrapper">\n  <table id="table" class="stripe display responsive" width="100%"></table>\n</div>\n',window.addEventListener("DOMContentLoaded",(function(){m(),document.querySelector("#mapLegend").innerHTML=function(e){var n=['\n    <div id="map-legend-show" class="map-legend-row map-legend-icon flex '+(s?"visible":"invisible")+'">\n      <span>See Legend</span>\n    </div>\n    <div id="map-legend-hide" class="map-legend-row map-legend-icon flex '+(s?"invisible":"visible")+'">\n      <span>Hide Legend</span>\n    </div>\n  '];for(var t in e)e.hasOwnProperty(t)&&n.push('\n        <div class="map-legend-row map-legend-content flex '+(s?"invisible":"visible")+'">\n          <div class="map-legend-color" style="background: '+e[t]+'"></div>\n          <span>'+t+"</span>\n        </div>\n      ");return'<div class="map-legend flex flex-column">'+n.join("\n")+"</div>"}(r);var e=document.querySelector("#map-legend-show"),n=document.querySelector("#map-legend-hide"),t=document.querySelectorAll(".map-legend-content");e.onclick=function(){e.classList.add("invisible"),e.classList.remove("visible"),n.classList.add("visible"),n.classList.remove("invisible"),t.forEach((function(e){e.classList.add("visible"),e.classList.remove("invisible")}))},n.onclick=function(){e.classList.remove("invisible"),e.classList.add("visible"),n.classList.remove("visible"),n.classList.add("invisible"),t.forEach((function(e){e.classList.remove("visible"),e.classList.add("invisible")}))}}))}],[[4,1,2]]]);
//# sourceMappingURL=app.23f60d11.js.map